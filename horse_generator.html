<!DOCTYPE html>
<html>

<head>
    <title>JSXGraph Example</title>
    <script src="https://cdn.jsdelivr.net/npm/jsxgraph/distrib/jsxgraphcore.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jsxgraph/distrib/jsxgraph.css" />
    <style>
        #box {
            min-width: 590px;
            height: 650px;
            background-color: #c9c9c9;
            margin: 8px;
        }

        form {
            margin: 8px;
            margin-top: 16px;
            font-size: smaller;
        }

        button {
            margin: 8px;
        }

        #text {
            width: 1000px
        }

        #flex {
            display: flex
        }

        #foal-sex-display,
        #foal-genotype-display {
            border: #453a35 1px solid;
            padding: 5px;
        }

        #test {
            background-color: #c38c72
        }
    </style>
</head>

<body>
    <div id="flex">
        <div id="box" class="jxgbox"></div>
        <!-- <div><button onclick="logCoordsAsArray()">log</button></div> -->
        <form id="genotype-form-dam">
            <fieldset>
                <legend>Rautiastekijä - emä</legend>
                <label><input type="radio" id="EE" name="E" value="EE" checked> EE - ei-rautias</label><br>
                <label><input type="radio" id="Ee" name="E" value="Ee"> Ee - ei-rautias kantaja</label><br>
                <label><input type="radio" id="ee" name="E" value="ee"> ee - rautias</label>
            </fieldset>

            <fieldset>
                <legend>Ruunikkotekijä - emä</legend>
                <label><input type="radio" id="AA" name="A" value="AA" checked> AA - ruunikko</label><br>
                <label><input type="radio" id="Aa" name="A" value="Aa"> Aa - ruunikko mustan kantaja</label><br>
                <label><input type="radio" id="aa" name="A" value="aa"> aa - musta</label>
            </fieldset>

            <fieldset>
                <legend>Voikkotekijä - emä</legend>
                <label><input type="radio" id="cc" name="C" value="cc" checked> CC - ei-voikko</label><br>
                <label><input type="radio" id="Cc" name="C" value="Cc"> CrC - voikko</label><br>
                <label><input type="radio" id="CC" name="C" value="CC"> CrCr - valkovoikko</label>
            </fieldset>

            <fieldset>
                <legend>Kimotekijä - emä</legend>
                <label><input type="radio" id="GG" name="G" value="GG" checked> GG - kimo</label><br>
                <label><input type="radio" id="Gg" name="G" value="Gg"> Gg - kimo</label><br>
                <label><input type="radio" id="gg" name="G" value="gg"> gg - ei-kimo</label>
            </fieldset>
            <fieldset>
                <legend>Kirjavuustekijä - emä</legend>
                <label><input type="radio" id="TT" name="TO" value="TT"> TOTO - tobianokirjava</label><br>
                <label><input type="radio" id="Tt" name="TO" value="Tt"> TOto - tobianokirjava </label><br>
                <label><input type="radio" id="tt" name="TO" value="tt" checked> toto - ei-kirjava</label>
            </fieldset>
            <fieldset>
                <legend>Hopeatekijä - emä</legend>
                <label><input type="radio" id="ZZ" name="Z" value="ZZ"> ZZ - hopea</label><br>
                <label><input type="radio" id="Zz" name="Z" value="Zz"> Zz - hopea </label><br>
                <label><input type="radio" id="zz" name="Z" value="zz" checked> zz - ei-hopea</label>
            </fieldset>
            <fieldset>
                <legend>Hallakkotekijä - emä</legend>
                <label><input type="radio" id="DD" name="D" value="DD"> DD - hallakko</label><br>
                <label><input type="radio" id="Dd" name="D" value="Dd"> Dd - hallakko </label><br>
                <label><input type="radio" id="dd" name="D" value="dd" checked> dd - ei-hallakko</label>
            </fieldset>
        </form>


        <form id="genotype-form-sire">
            <fieldset>
                <legend>Rautiastekijä - isä</legend>
                <label><input type="radio" id="EE" name="Es" value="EE" checked> EE - ei-rautias</label><br>
                <label><input type="radio" id="Ee" name="Es" value="Ee"> Ee - ei-rautias kantaja</label><br>
                <label><input type="radio" id="ee" name="Es" value="ee"> ee - rautias</label>
            </fieldset>

            <fieldset>
                <legend>Ruunikkotekijä - isä</legend>
                <label><input type="radio" id="AA" name="As" value="AA" checked> AA - ruunikko</label><br>
                <label><input type="radio" id="Aa" name="As" value="Aa"> Aa - ruunikko mustan kantaja</label><br>
                <label><input type="radio" id="aa" name="As" value="aa"> aa - musta</label>
            </fieldset>

            <fieldset>
                <legend>Voikkotekijä - isä</legend>
                <label><input type="radio" id="cc" name="Cs" value="cc" checked> CC - ei-voikko</label><br>
                <label><input type="radio" id="Cc" name="Cs" value="Cc"> CrC - voikko</label><br>
                <label><input type="radio" id="CC" name="Cs" value="CC"> CrCr - valkovoikko</label>
            </fieldset>

            <fieldset>
                <legend>Kimotekijä - isä</legend>
                <label><input type="radio" id="GG" name="Gs" value="GG" checked> GG - kimo</label><br>
                <label><input type="radio" id="Gg" name="Gs" value="Gg"> Gg - kimo</label><br>
                <label><input type="radio" id="gg" name="Gs" value="gg"> gg - ei-kimo</label>
            </fieldset>
            <fieldset>
                <legend>Kirjavuustekijä - isä</legend>
                <label><input type="radio" id="TT" name="TOs" value="TT"> TOTO - tobianokirjava</label><br>
                <label><input type="radio" id="Tt" name="TOs" value="Tt"> TOto - tobianokirjava </label><br>
                <label><input type="radio" id="tt" name="TOs" value="tt" checked> toto - ei-kirjava</label>
            </fieldset>
            <fieldset>
                <legend>Hopeatekijä - isä</legend>
                <label><input type="radio" id="ZZ" name="Zs" value="ZZ"> ZZ - hopea</label><br>
                <label><input type="radio" id="Zz" name="Zs" value="Zz"> Zz - hopea </label><br>
                <label><input type="radio" id="zz" name="Zs" value="zz" checked> zz - ei-hopea</label>
            </fieldset>
            <fieldset>
                <legend>Hallakkotekijä - isä</legend>
                <label><input type="radio" id="DD" name="Ds" value="DD"> DD - hallakko</label><br>
                <label><input type="radio" id="Dd" name="Ds" value="Dd"> Dd - hallakko </label><br>
                <label><input type="radio" id="dd" name="Ds" value="dd" checked> dd - ei-hallakko</label>
            </fieldset>
        </form>
    </div>


    </div>
    <div style="display: flex;">
        <button id="generate-btn"> Generoi varsa</button>
        <div id="foal-genotype-display" style="font-family: monospace; margin: 8px;"> Varsan genotyyppi: -- -- -- -- --
            --
        </div>
        <div id="foal-sex-display" style="font-family: monospace; margin: 8px; margin-left: 16px;"> Sukupuoli: - </div>
        
    </div>
        <div id="dam-color-display" style="font-family: monospace; margin: 8px;"> Emän väri: -</div>
        <div id="sire-color-display" style="font-family: monospace; margin: 8px;"> Isän väri: - </div>
        <div id="foal-color-display" style="font-family: monospace; margin: 8px;"> Varsan väri: - </div>
    <!-- <button onclick="logCoordsAsArray()"> log</button> -->
    <div id="text">
        <h4> Simulaattorista ja värigeeneistä</h4>

        Rautiaan hevosen karvapeite ja jouhet ovat ruskeat. Ruunikko hevonen on sen sijaan ruskea mustilla jouhilla ja
        yleensä myös sen jalat ovat mustat.
        Rautiastekijä vaikuttaa ruunikkotekijän ilmenemiseen: EE- tai Ee-yksilöt voivat olla ulkoisesti ruunikkoja tai
        mustia,
        mutta ee-yksilö on rautias riippumatta siitä, mikä sen genotyyppi ruunikkotekijän osalta on. <br><br>
        Rautias, ruunikko ja musta ovat perusvärejä, joita muut tekijät voivat vaalentaa.
        Voikkotekijä vaalentaa ruunikon ruunivoikoksi, jolla on tumma harja ja vaaleanruskea karva, kun taas rautiaan se
        vaalentaa
        niin, että harjasta tulee valkoinen ja karvasta vaaleanruskea (klassinen voikko). Voikkotekijä mustalla pohjalla
        vaalentaa ainoastaan karvaa hieman, tehden siitä tummanruskean (mustanvoikko). <br><br>

        Kimotekijä voi vaalentaa minkä tahansa muun värin hevosen ikääntyessä: kimot syntyvät pohjavärinsä värisinä ja
        harmaantuvat vähitellen,
        kunnes ne ovat valkoisia tai lähes valkoisia. Tässä simulaatiossa kimoutta kuvaa aina sama harmaa väri, vaikka
        todellisuudessa
        kimon hevosen väritys riippuu sen pohjaväristä, iästä ja muista tekijöistä. Simulaation hevosilla olevat vaaleat
        pilkut kuvaavat kimoilla hevosilla yleistä
        papurikkokuviointia, jota ei kuitenkaan esiinny aivan kaikilla kimoilla. <br><br>


        Kirjavuus voi esiintyä minkä tahansa muun värin ohella eikä vaikuta tämän pohjavärin sävyihin - se ainoastaan
        lisää valkoisia, pohjavärin "peittäviä" laikkuja
        eri puolille hevosen kehoa. <br><br>

        Hopeageeni vaikuttaa mustaan pigmenttiin ja vaalentaa mustan harjan hopeisen vaaleaksi. Rautiaalla hevosella sen
        vaikutus ei näy. Mustan pohjavärin hopeageeni sen sijaan vaalentaa harmaanruskeaksi, ja lisäksi on tyypillistä, että se aiheuttaa
         tummalla pohjalla vaaleita papurikkokuvioita. <br> <br>

        Hallakkotekijä vaikuttaa sekä mustaan että punaruskeaan pigmenttiin ja vaalentaa karvan väriä samankaltaisesti kuin voikkotekijä, mutta siitä 
        poiketen se jättää hevosen ylälinjaan tumman "siiman", minkä seurauksena osa harjasta jää tummemmaksi. Mustapohjaista 
        hallakkoa sanotaan hiirakoksi. <br> <br>

        Tämä simulaattori ei ole täydellinen: se ei esimerkiksi kuvaa lainkaan "alatyyppejä" tai sävyeroja eri värityyppien sisällä, vaikka
         todellisuudessa esimerkiksi rautiaat voivat olla sävyltään mitä tahansa hyvin vaaleanruskean ja syvän tummanruskean väliltä. Lisäksi
         tässä simulaattorissa useiden vaalentavien tekijöiden yhdistelmät ovat väritykseltään ainoastaan suuntaa-antavia: 
        todellisuudessa esimerkiksi ruunikko- ja rautiaspohjaiset valkovoikot ovat yleensä erotettavissa toisistaan pienten sävyerojen perusteella, 
        mutta tässä simulaatiossa ne kuvataan kaikki samanvärisinä. Lisäksi on mainittava, että todellisuudessa on hyvin harvinaista, että
        samalla hevosyksilöllä olisi samaan aikaan esimerkiksi voikko-, hallakko- ja hopeatekijät, mistä seuraa myös se, että tietoa niiden yhteisvaikutuksesta
        on jokseenkin vaikea löytää. Simulaattoriin ei myöskään ole sisällytetty mm. päistärikkö-, pearl- tai samppanjavärejä tai
        muita kirjavuuden tyyppejä kuin tobiano. 

        <h4> Tehtävät</h4>
        Yksilöllä on kaksi alleelia, joista toinen periytyy sen jälkeläiselle. Valinta on satunnainen eli kummallakin
        alleelilla on 50% mahdollisuus periytyä. Jälkeläisen genotyyppi muodostuu yhdestä isältä peritystä alleelista ja
        yhdestä emältä peritystä alleelista. Eri geenit periytyvät toisistaan riippumattomasti.<br> <br>

        1. Jos emän genotyyppi on CrC ja isän genotyyppi CrC, millä todennäköisyydellä varsan genotyyppi on CrCr? //25%
        <br>
        <br>
        2. Jos emä on rautias ja “piilomusta” (ee + aa), ja isä on ei-rautias ruunikko mustan kantaja (Ee Aa), millä
        todennäköisyydellä varsasta tulee <br>
        a) rautias (ee Aa tai ee aa) // 0.5 * 1 = 50%<br>
        b) ruunikko (Ee Aa) // 0.5 * 0.5 = 25%<br>
        c) musta (Ee aa) ? // 0.5 * 0.5 = 25%<br><br>
        3. Oleta, että voit hankkia minkä tahansa värisiä hevosia ja niiden koko genotyyppi on aina tiedossa. Millaiset
        vanhemmat valitsisit kasvatukseen, jos tavoitteenasi on saada mahdollisimman suurella todennäköisyydellä <br>
        a) voikko jälkeläinen? // CC x CrCr (+ molemmat pohjaltaan rautiaita, ei-kimoja). <br>
        b) kimo jälkeläinen, joka voi kuitenkin itse tuottaa ei-kimoja jälkeläisiä seuraavissa sukupolvissa riippumatta
        toisen vanhemman genotyypistä? // (GG x gg)<br>
        c) ruunivoikko jälkeläinen, eli sellainen, joka on genotyypiltään ei-rautias + ruunikko + voikko. // EE AA CC x
        EE
        AA CrCr => EE AA CrC <br>
        d) musta jälkeläinen, joka voi itse tuottaa rautiaita jälkeläisiä? // aa ee x aa EE (+molemmat myös ei-voikkoja,
        ei-kimoja, ei-hallakko, jne.)<br>

    </div>


    <script type="module" src="horse_generator.js"></script>

</body>

</html>